<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../../../index.css">
</head>

<body>
  <h1>规范化文本节点</h1>
  <p>DOM 文档中的同胞文本节点可能导致困惑 , 因为一个文本几点足以表示一个文本字符串。同样 , DOM 文档中也经常会出现两个相邻文本节点 。 为此,有一个方法可以合并相邻的文本节点。 这个方法叫 normalize()
    , 是在Node 类型中定义的 (因此所有类型的节点上都有这个方法) 。<strong>在包含两个或多个相邻文本节点的父节点上调用 normalize() 时, 所有同胞文本节点被合并为一个文本节点</strong> ,
    这个文本节点的 nodeValue 就等于之前所有同胞节点nodeValue 拼接在一起得到的字符串 。 来看下面的例子:</p>
  <code>
      <pre>
    let element = document.createElement('div')
    element.className = 'message'

    let textNode = document.createTextNode('Hello world!')
    element.appendChild(textNode)

    let anotherTextNode = document.createTextNode('Yippee!')
    element.appendChild(anotherTextNode)

    document.body.appendChild(element)

    console.log(element.childNodes.length) // 2

    element.normalize()
    console.log(element.childNodes.length)  // 1
    console.log(element.firstChild.nodeValue) // Hello world!Yippee!

    <strong>这里的 console.log 之所以输出1 就是因为normalize 把所以的文本节点合成一个了 是吧</strong>
      </pre>
    </code>
  <p>浏览器在解析文档时，永远不会创建同胞文本节点。同胞文本节点只会出现在DOM脚本生成的文档树中。 <strong>因为浏览器解析的时候会将HTML文档里面的所有的文本节点就行合并 , 这就是为什么在HTML文档中不论怎么换行 ,
      怎么打空格 ,永远都是只显示一个空格 :: 而用js创建文本节点在添加到页面中就会创建两个文本节点 , 因为浏览器会严格按照js代码来执行 , 所以就会创建两个文本节点 ,
      只要记住有两个文本节点的都是通过js来创建的</strong> </p>
  <script>
    let element = document.createElement('div')
    element.className = 'message'

    let textNode = document.createTextNode('Hello world!')
    element.appendChild(textNode)

    let anotherTextNode = document.createTextNode('Yippee!')
    element.appendChild(anotherTextNode)

    document.body.appendChild(element)

    console.log(element.childNodes.length) // 2

    element.normalize()
    console.log(element.childNodes.length)  // 1
    console.log(element.firstChild.nodeValue) // Hello world!Yippee!
  </script>
</body>

</html>