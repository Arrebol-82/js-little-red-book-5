<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>邻近处理程序的执行顺序</h1>
  <p>如果给期约添加了多个处理程序，当期约状态变化时，相关处理程序会按照添加它们的顺序依次执行
    无论then() catch() 还是 finally() 添加的处理程序都是如此</p>
  <script>

    console.asyncLog = (...residue) => setTimeout(console.log, 0, ...residue)
    let p1 = Promise.resolve();
    let p2 = Promise.reject();

    p1.then(() => console.asyncLog(1))
    p1.then(() => console.asyncLog(2))

    p2.then(null, () => console.asyncLog(3))
    p2.then(null, () => console.asyncLog(4))

    p2.catch(() => console.asyncLog(5))
    p2.catch(() => console.asyncLog(6))

    p1.finally(() => console.asyncLog(7))
    p1.finally(() => console.asyncLog(8))
  </script>
</body>

</html>