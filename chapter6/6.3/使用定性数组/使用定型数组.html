<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    li {
      list-style: decimal;
    }
  </style>
</head>

<body>
  <h1>使用定型数组</h1>
  <p>那时候需要通过实例化 , 看下面</p>
  <ul>
    <li>构造函数（如 Int32Array()）负责创建新对象，必须用 new</li>
    <li>静态方法（如 from()、of()）是类提供的工具，直接调用即可 后面就是通过Int32Array来代理就好了</li>
  </ul>
  <p>如果定型数组没有初始化值 , 就会关联二进制缓冲会以 <strong>0</strong> 填充</p>
  <script>
    const buf = new ArrayBuffer(12)
    // 引用缓冲  因为Int32是占4字节  缓冲区位12字节
    const init = new Int32Array(buf) //此时这个数组是只能存储 3 个索引

    console.log(init.length);

    const init1 = new Int32Array(6) // 手动设置成了,可以存储成 6  ,既数组的长度为 6
    console.log(init1.length);
    // 这是对于数组的字节长度
    console.log(init1.byteLength);
    // 这是指向他所对应的缓冲区的字节长度 , 
    console.log(init1.buffer.byteLength);

    const ints3 = new Int32Array([2, 4, 6, 8])
    console.log(ints3.length);
    console.log(ints3.buffer.byteLength);
    console.log(ints3[0]);

    const ints4 = new Int16Array(ints3)
    // Int16Array = 2字节
    console.log(ints4.length);
    console.log(ints4.buffer.byteLength);
    console.log(ints4[0]);


    console.log('基于普通数组,创建定型数组');

    // 不用实例化
    const ints5 = Int16Array.from([3, 5, 7, 9])
    console.log(ints5.length);
    console.log(ints5.buffer.byteLength);
    console.log(ints5[0]);

    console.log('Float32Array');

    const floats = Float32Array.of(3.14, 2.718, 1.618)
    console.log(floats.length);
    console.log(floats.byteLength);
    console.log(floats.buffer.byteLength);
    console.log(floats[0]);

    console.log('构造函数和实例都有一个 BYTES_PER_ELEMENT 返回该类型的每个元素占用的字节数');
    console.log(Int16Array.BYTES_PER_ELEMENT);
    console.log(Int32Array.BYTES_PER_ELEMENT);
    console.log(BigInt64Array.BYTES_PER_ELEMENT);

    const ints = new Int32Array(1)
    float = new Float64Array(1)

    console.log(ints.BYTES_PER_ELEMENT);
    console.log(float.BYTES_PER_ELEMENT);

    console.log('========= 默认填充为0 ==========');
    const ints6 = new Int16Array(4)
    console.log(ints6[0]);
    console.log(ints6[1]);
    console.log(ints6[2]);
    console.log(ints6[3]);
    console.log(ints6[4]); //undefined


  </script>
</body>

</html>