<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>new.target</h1>
  <p>函数始终可以作为构造函数实例化一个新对象 也可以作为普通函数 为此 ECMAscript支持使用new.target属性检测函数是否使用了 new 关键字调用的 看代码</p>
  <code>
    <pre>
      function foo() { }
    </pre>
  </code>
  <p>如果foo函数是使用 foo() 调用的 , 那么new.target 的值就是undefined , 如果是使用new foo 调用的 则 new.target将引用被调用的构造函数</p>
  <code>
    <pre>
      function King() {
        console.log(new.target);

        if (!new.target) {
          throw 'King must be unstantiates using "new" '
        }
        console.log('King instantiated using ');
      }

      King()  // undefined   Uncaught King must be unstantiates using "new" 
      new King() // King instantiated using   ƒ King() {}
    </pre>
  </code>
  <script>
    function foo() { }

    function King() {
      console.log(new.target);

      if (!new.target) {
        throw 'King must be unstantiates using "new" '
      }
      console.log('King instantiated using ');
    }

    King()  // undefined   Uncaught King must be unstantiates using "new" 
    new King() // King instantiated using   ƒ King() {}
  </script>
</body>

</html>